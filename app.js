function toggleLayer(e){var o=$("#lay_mask").css("z-index");if(e.hasClass("PopupLayer")){if(console.log("off popup layer"),$(".PopupLayer").length>1){var n=o-10;$("#lay_mask").css("z-index",n)}else $("#lay_mask").hide();e.removeClass("PopupLayer").hide()}else{console.log("on popup layer"),ResizingLayer();var l=$(window).scrollLeft()+($(window).width()-e.width())/2,t=$(window).scrollTop()+($(window).height()-e.height())/2;0>t&&(t=0),0>l&&(l=0);var n=Number(o)+10;$("#lay_mask").css("z-index",n),e.css({left:l,top:t,"z-index":n}).addClass("PopupLayer"),$("body").append(e),wrapWindowByMask(),e.show()}}function wrapWindowByMask(){var e=$("#lay_mask"),o=$(document).height(),n=$(window).width();e.css({width:n,height:o}),e.show()}function ResizingLayer(){if("block"==$("#lay_mask").css("display")){var e=$(document).height(),o=$(window).width();$("#lay_mask").css({width:o,height:e}),$(".PopupLayer").each(function(){var e=$(window).scrollLeft()+($(window).width()-$(this).width())/2,o=$(window).scrollTop()+($(window).height()-$(this).height())/2;0>o&&(o=0),0>e&&(e=0),$(this).css({left:e,top:o})})}}function isFullScreen(){return document.fullScreenElement&&null!==document.fullScreenElement||document.mozFullScreen||document.webkitIsFullScreen}function requestFullScreen(e){console.log("full screen"),e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()}function cancelFullScreen(){console.log("cancel full screen"),document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()}function toggleFullScreen(e){isFullScreen()?cancelFullScreen():requestFullScreen(e||document.documentElement)}var note={$wrap:$(document.body),storageKey:"note"};!function(e){e.util={storage:{load:function(){if(!localStorage.getItem(e.storageKey)){console.log("need setItem");var o=$.extend({},e.model,{memo:""});localStorage.setItem(e.storageKey,JSON.stringify(o))}return JSON.parse(localStorage.getItem(e.storageKey))},save:function(o,n){localStorage.setItem(e.storageKey,JSON.stringify(n))}}},e.$wrap.on("addCollection",e.util.storage.save)}(note),function(e){e.model={memo:""}}(note),function(e,o){e.collection={set:function(o){e.$wrap.trigger("addCollection",o)},save:function(n){var l=o.extend({},e.model,{memo:n});e.$wrap.trigger("addCollection",l)}}}(note,jQuery),console.log("my-note app.js"),function(e,o,n){var l=e("#menu");l.on("click",".btn-newnote",function(o){console.log("new note");var n=e("#memo");n.val(null)}),l.on("click",".btn-savenote",function(o){console.log("save note");var l=e("#memo"),t=l.val();n.collection.save(t)}),l.on("click",".btn-about",function(o){console.log("about");var n=e("#layer");toggleLayer(n)}),l.on("click",".btn-full",function(e){console.log("full screen");var o=document.getElementById("output");toggleFullScreen(o)});var t=n.util.storage.load();if(t){var c=e("#memo");c.val(t.memo),n.collection.set(t)}}(jQuery,window,note);